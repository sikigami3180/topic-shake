<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, 
  maximum-scale=1.0, user-scalable=no" />
</head>
<body>
  <script>
    function post_function( result_string ) {
        if ( result_string === "granted" ) {
            // ユーザが許可した場合、文字列"granted"が返る
        }
        else if ( result_string === "denied" ) {
    // ユーザが拒否した場合、文字列"denied"が返る
        }
    }
    function permission_request() {
        if ( DeviceOrientationEvent
            && DeviceOrientationEvent.requestPermission
            && typeof DeviceOrientationEvent.requestPermission === 'function'
        ) {
    DeviceMotionEvent.requestPermission().then( post_function );
    window.addEventListener( "devicemotion", function(e) {
                // 何らかの処理
                console.log("sensor")
            }, true );
        }
        if ( DeviceOrientationEvent
            && DeviceOrientationEvent.requestPermission
            && typeof DeviceOrientationEvent.requestPermission === 'function'
        ) {
            DeviceOrientationEvent.requestPermission().then( postf_unction );
    window.addEventListener( "deviceorientation", function(e) {
                // 何らかの処理
            }, true );
        }
    }
  </script>
  <button onclick="permission_request();">動作と方向へのアクセス許可</button>
  話題に困った時に振るやつ
  <div id="result_acc">
    aaa
  </div>
  <br />
  <div id="result_gyro">
    bbb
  </div>
</body>
</html>
